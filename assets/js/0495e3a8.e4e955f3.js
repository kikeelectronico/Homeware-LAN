"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[246],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),c=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(d.Provider,{value:t},e.children)},s="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),s=c(a),m=r,h=s["".concat(d,".").concat(m)]||s[m]||u[m]||i;return a?n.createElement(h,o(o({ref:t},p),{},{components:a})):n.createElement(h,o({ref:t},p))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[s]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},4363:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const i={id:"connecting-hardware",title:"Connecting hardware to Homeware",sidebar_label:"Connect a device"},o=void 0,l={unversionedId:"connecting-hardware",id:"connecting-hardware",title:"Connecting hardware to Homeware",description:"Homeware LAN uses MQTT for communicate with your hardware devices. You can use any example and library that you want in order to make it works.",source:"@site/docs/connecting-hardware.md",sourceDirName:".",slug:"/connecting-hardware",permalink:"/Homeware-LAN/docs/connecting-hardware",draft:!1,editUrl:"https://github.com/kikeelectronico/Homeware-LAN/tree/master/docs/docs/connecting-hardware.md",tags:[],version:"current",frontMatter:{id:"connecting-hardware",title:"Connecting hardware to Homeware",sidebar_label:"Connect a device"},sidebar:"someSidebar",previous:{title:"Create a device",permalink:"/Homeware-LAN/docs/create-device"},next:{title:"Update Homeware",permalink:"/Homeware-LAN/docs/update-homeware"}},d={},c=[{value:"Homeware to hardware - receive data",id:"homeware-to-hardware---receive-data",level:2},{value:"Main Topic",id:"main-topic",level:3},{value:"Example",id:"example",level:4},{value:"Individual Topics",id:"individual-topics",level:3},{value:"Example",id:"example-1",level:4},{value:"Hardware to Homeware - send data",id:"hardware-to-homeware---send-data",level:2},{value:"Example",id:"example-2",level:3},{value:"Hardware to Homeware - request data",id:"hardware-to-homeware---request-data",level:2}],p={toc:c},s="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(s,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Homeware LAN uses MQTT for communicate with your hardware devices. You can use any example and library that you want in order to make it works."),(0,r.kt)("h1",{id:"connection-data"},"Connection data"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Host"),": It is the IP of your Raspberry Pi."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Port"),": 1883"),(0,r.kt)("h1",{id:"topics"},"Topics"),(0,r.kt)("h2",{id:"homeware-to-hardware---receive-data"},"Homeware to hardware - receive data"),(0,r.kt)("p",null,"You can see all the device's topics at ",(0,r.kt)("inlineCode",{parentName:"p"},"https://<your.domain.com>/devices/connecting/<device-id>/")),(0,r.kt)("h3",{id:"main-topic"},"Main Topic"),(0,r.kt)("p",null,"Each device has its own main topic that will be used by Homeware to send information to the device."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"main topic for each device")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"device/<device-id>")," where ",(0,r.kt)("inlineCode",{parentName:"p"},"<device-id>")," is the unique id of each device."),(0,r.kt)("p",null,"The data that Homeware will sent depends on the device type and is a JSON formatted string."),(0,r.kt)("h4",{id:"example"},"Example"),(0,r.kt)("p",null,"Imagine that we have a light in which both the On/Off status and the brightness can be controlled. Every time the status changes in Homeware, it will send something like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"on":true,"brightness":80}\n')),(0,r.kt)("h3",{id:"individual-topics"},"Individual Topics"),(0,r.kt)("p",null,"Each device has individual topics for each param or command."),(0,r.kt)("h4",{id:"example-1"},"Example"),(0,r.kt)("p",null,"Imagine that we have a light in which the On/Off status can be controlled. Every time the ",(0,r.kt)("inlineCode",{parentName:"p"},"on")," status changes in Homeware, it will send the new status to ",(0,r.kt)("inlineCode",{parentName:"p"},"device/<device-id>/on"),"."),(0,r.kt)("h2",{id:"hardware-to-homeware---send-data"},"Hardware to Homeware - send data"),(0,r.kt)("p",null,"The hardware can send data back to Homeware sending the data to the topic ",(0,r.kt)("inlineCode",{parentName:"p"},"device/control")," and using the next format:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"id":"<device-id>","param":"<param-to-change>","value":"<new-value-for-param>","intent":"<new-intent>"}\n')),(0,r.kt)("h3",{id:"example-2"},"Example"),(0,r.kt)("p",null,"Imagine that we have a smart bulb which ",(0,r.kt)("inlineCode",{parentName:"p"},"<device-id>")," at Homeware is light001 and we want to change its brightness to 80%. We will send to ",(0,r.kt)("inlineCode",{parentName:"p"},"device/control")," topic:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"id":"light001","param":"brightness","value":"80","intent":"<new-intent>"}\n')),(0,r.kt)("p",null,"The last parameter that must be configured is the intent, it can be set to:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"execute")," -> Means that we only want to store the new value."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"rules")," -> Means that we want to store the new value and verify all rules. It could be interesting if we know that one or more rules uses the parameter that we are changing as a trigger for do another job."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"request")," -> Check ",(0,r.kt)("a",{parentName:"p",href:"#hardware-to-homeware---request-data"},"Hardware to Homeware - request data"),"."),(0,r.kt)("p",null,"The complete request can be something like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"id":"light001","param":"brightness","value":80,"intent":"execute"}\n')),(0,r.kt)("h2",{id:"hardware-to-homeware---request-data"},"Hardware to Homeware - request data"),(0,r.kt)("p",null,"The hardware can request its information to Homeware at any time by sending a request to ",(0,r.kt)("inlineCode",{parentName:"p"},"device/control")," topic and using ",(0,r.kt)("inlineCode",{parentName:"p"},"request")," as intent."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"id":"light001","param":"","value":"","intent":"request"}\n')))}u.isMDXComponent=!0}}]);