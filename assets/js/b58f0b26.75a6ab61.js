"use strict";(self.webpackChunkhomeware=self.webpackChunkhomeware||[]).push([[124],{8453:(e,t,i)=>{i.d(t,{R:()=>c,x:()=>o});var n=i(6540);const s={},a=n.createContext(s);function c(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(a.Provider,{value:t},e.children)}},8645:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>c,metadata:()=>n,toc:()=>r});const n=JSON.parse('{"id":"mqtt-api","title":"MQTT API","description":"Homeware LAN has an MQTT API for getting and setting the status of any device. You can use this API for communicating Homeware with your hardware devices.","source":"@site/docs/mqtt-api.md","sourceDirName":".","slug":"/mqtt-api","permalink":"/docs/mqtt-api","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"mqtt-api","title":"MQTT API","sidebar_label":"MQTT API"},"sidebar":"someSidebar","previous":{"title":"Google auth for sync","permalink":"/docs/google-auth"},"next":{"title":"Create a device","permalink":"/docs/create-device"}}');var s=i(4848),a=i(8453);const c={id:"mqtt-api",title:"MQTT API",sidebar_label:"MQTT API"},o=void 0,d={},r=[{value:"Connection data",id:"connection-data",level:2},{value:"Status of a device",id:"status-of-a-device",level:2},{value:"Subscribing to the status of a device",id:"subscribing-to-the-status-of-a-device",level:2},{value:"Main Topic",id:"main-topic",level:3},{value:"Example",id:"example",level:4},{value:"Individual Topics",id:"individual-topics",level:3},{value:"Example",id:"example-1",level:4},{value:"Update the status of a device",id:"update-the-status-of-a-device",level:2},{value:"Example",id:"example-2",level:4},{value:"Request the status of a device",id:"request-the-status-of-a-device",level:2}];function h(e){const t={code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Homeware LAN has an MQTT API for getting and setting the status of any device. You can use this API for communicating Homeware with your hardware devices."}),"\n",(0,s.jsx)(t.h2,{id:"connection-data",children:"Connection data"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Host"}),": It is the IP of the machine that runs Homeware."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Port"}),": 1883"]}),"\n",(0,s.jsx)(t.h2,{id:"status-of-a-device",children:"Status of a device"}),"\n",(0,s.jsx)(t.p,{children:"The status of a device is composed by several parameters. For example, the status of a light can be something like:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'{\n  "on": false,\n  "online": true,\n  "brightness": 80,\n  "color": {\n    "temperature": 5000\n  }\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["You can see all the device's parameters at ",(0,s.jsx)(t.code,{children:"https://<your.domain.com>/devices/info/<device-id>/"})]}),"\n",(0,s.jsx)(t.h2,{id:"subscribing-to-the-status-of-a-device",children:"Subscribing to the status of a device"}),"\n",(0,s.jsxs)(t.p,{children:["Every device has at least two topics where Homeware posts the status of the device if it changes. You can see all the device's topics at ",(0,s.jsx)(t.code,{children:"https://<your.domain.com>/devices/connecting/<device-id>/"})]}),"\n",(0,s.jsx)(t.h3,{id:"main-topic",children:"Main Topic"}),"\n",(0,s.jsx)(t.p,{children:"Each device has its own main topic that is used by Homeware to post the status of a device. It publishes all the parameters in a JSON format."}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"main topic for each device"})," is ",(0,s.jsx)(t.code,{children:"device/<device-id>"})," where ",(0,s.jsx)(t.code,{children:"<device-id>"})," is the unique id of each device."]}),"\n",(0,s.jsx)(t.h4,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.p,{children:"For a light in which both the On/Off status and the brightness can be controlled, every time the status changes in Homeware, it posts something like:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'{"on":true,"brightness":80}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"individual-topics",children:"Individual Topics"}),"\n",(0,s.jsx)(t.p,{children:"Each device has individual topics for each parameter or command."}),"\n",(0,s.jsx)(t.h4,{id:"example-1",children:"Example"}),"\n",(0,s.jsxs)(t.p,{children:["For a light in which the On/Off status can be controlled, every time the ",(0,s.jsx)(t.code,{children:"on"})," status changes in Homeware, it posts the new status in ",(0,s.jsx)(t.code,{children:"device/<device-id>/on"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"true\n"})}),"\n",(0,s.jsx)(t.h2,{id:"update-the-status-of-a-device",children:"Update the status of a device"}),"\n",(0,s.jsxs)(t.p,{children:["You can change the status of a device in Homeware posting the new status in the topic ",(0,s.jsx)(t.code,{children:"device/control"})," using the next format:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'{"id":"<device-id>","param":"<param-to-change>","value":"<new-value-for-param>","intent":"<new-intent>"}\n'})}),"\n",(0,s.jsx)(t.h4,{id:"example-2",children:"Example"}),"\n",(0,s.jsxs)(t.p,{children:["For a smart bulb which ",(0,s.jsx)(t.code,{children:"<device-id>"})," at Homeware is light001, if you want to change its brightness to 80%. You must post the following at ",(0,s.jsx)(t.code,{children:"device/control"})," topic:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'{"id":"light001","param":"brightness","value":"80","intent":"execute"}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"intent"})," key should be set to ",(0,s.jsx)(t.code,{children:"execute"})," for updating the status of a device."]}),"\n",(0,s.jsx)(t.h2,{id:"request-the-status-of-a-device",children:"Request the status of a device"}),"\n",(0,s.jsxs)(t.p,{children:["You can request to Homeware to publish the status of a device at any time by posting a request to ",(0,s.jsx)(t.code,{children:"device/control"})," topic."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'{"id":"light001","param":"","value":"","intent":"request"}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"intent"})," key should be set to ",(0,s.jsx)(t.code,{children:"request"})," for requesting the status of a device."]})]})}function l(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);