{
  "swagger": "2.0",
  "info": {
    "description": "Homeware's API documentation.",
    "version": "v1.x.x",
    "title": "Homeware's API",
    "contact": {
      "email": "hola@rinconingenieril.es"
    },
    "license": {
      "name": "MIT License",
      "url": "https://github.com/kikeelectronico/Homeware-LAN/blob/master/LICENSE"
    }
  },
  "host": "https://your.domain.com",
  "basePath": "/api",
  "tags": [
    {
      "name": "Devices",
      "description": "Everything about the devices definition and status."
    },
    {
      "name": "Tasks",
      "description": "Everything about the tasks."
    },
    {
      "name": "Global",
      "description": "General endpoints"
    },
    {
      "name": "User",
      "description": "User login and sync"
    },
    {
      "name": "Settings",
      "description": "Homeware settings"
    },
    {
      "name": "System",
      "description": "System operations"
    },
    {
      "name": "Log",
      "description": "System logs"
    }
  ],
  "schemes": [
    "https",
    "http"
  ],
  "paths": {
    "/devices/get/": {
      "get": {
        "tags": [
          "Devices"
        ],
        "summary": "Get all the devices info",
        "description": "Returns all the devices and theirs definition.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns an array with all the devices.",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/device"
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/devices/get/{id}/": {
      "get": {
        "tags": [
          "Devices"
        ],
        "summary": "Get a device info",
        "description": "Returns the device and its definition.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
          {
            "name": "id",
            "in": "path",
            "description": "The id of the device that wants to be consulted.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "switch001"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the requested device.",
            "schema": {
              "$ref": "#/definitions/device"
            }
          },
          "404": {
            "description": "Not found. The device does not exists.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Device not found"
                },
                "code": {
                  "type": "int",
                  "example": 404
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/devices/delete/{id}/": {
      "get": {
        "tags": [
          "Devices"
        ],
        "summary": "Delete a device",
        "description": "Delete a device.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
          {
            "name": "id",
            "in": "path",
            "description": "The id of the device that wants to be deleted.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "switch001"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          },
          "404": {
            "description": "Not found. The device does not exists.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Device not found"
                },
                "code": {
                  "type": "int",
                  "example": 404
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/devices/create/": {
      "post": {
        "tags": [
          "Devices"
        ],
        "summary": "Create a device",
        "description": "Create a device.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
         {
           "in": "body",
           "name": "body",
           "description": "New device description.",
           "required": true,
           "schema": {
             "type": "object",
             "properties": {
               "device": {
                 "$ref": "#/definitions/device"
               },
               "status":{
                 "$ref": "#/definitions/status"
               }
             }
           }
         }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/devices/update/": {
      "post": {
        "tags": [
          "Devices"
        ],
        "summary": "Update a device",
        "description": "Update a device.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
         {
           "in": "body",
           "name": "body",
           "description": "New device description.",
           "required": true,
           "schema": {
             "type": "object",
             "properties": {
               "device": {
                 "$ref": "#/definitions/device"
               }
             }
           }
         }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          },
          "404": {
            "description": "Not found. The device does not exists.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Device not found"
                },
                "code": {
                  "type": "int",
                  "example": 404
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/status/get/": {
      "get": {
        "tags": [
          "Devices"
        ],
        "summary": "Get all the devices status",
        "description": "Returns all the devices and theirs status.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns an array with all the devices' status.",
            "schema": {
              "type": "object",
              "properties": {
                "deviceID": {
                  "$ref": "#/definitions/status"
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          },
          "404": {
            "description": "Not found. The device does not exists.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Device not found"
                },
                "code": {
                  "type": "int",
                  "example": 404
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/status/get/{id}/": {
      "get": {
        "tags": [
          "Devices"
        ],
        "summary": "Get a device status",
        "description": "Returns the device and its status.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
          {
            "name": "id",
            "in": "path",
            "description": "The id of the device that wants to be consulted.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "switch001"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns an array with the status of the device.",
            "schema": {
              "$ref": "#/definitions/status"
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          },
          "404": {
            "description": "Not found. The device does not exists.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Device not found"
                },
                "code": {
                  "type": "int",
                  "example": 404
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/status/update/": {
      "post": {
        "tags": [
          "Devices"
        ],
        "summary": "Update the status of a device",
        "description": "Update the status of a device.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
         {
           "in": "body",
           "name": "body",
           "description": "New devie description.",
           "required": true,
           "schema": {
             "type": "object",
             "properties": {
               "id": {
                 "type": "array",
                 "example": "sitch001"
               },
               "param": {
                 "type": "array",
                 "example": "on"
               },
               "value": {
                 "type": "bool",
                 "example": true
               }
             }
           }
         }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/get/": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Get all the tasks info",
        "description": "Returns all the tasks and theirs definitions.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns an array with all the tasks.",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/task"
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/get/{id}/": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Get a task info",
        "description": "Returns the task and its definition.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
          {
            "name": "id",
            "in": "path",
            "description": "The id of the task that wants to be consulted.",
            "required": true,
            "type": "int",
            "schema": {
              "type": "int",
              "example": "1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the requested task.",
            "schema": {
              "$ref": "#/definitions/task"
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          },
          "404": {
            "description": "Not found. The task does not exists.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Task not found"
                },
                "code": {
                  "type": "int",
                  "example": 404
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/delete/{id}/": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Delete a task",
        "description": "Delete a task.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
          {
            "name": "id",
            "in": "path",
            "description": "The id of the task that wants to be deleted.",
            "required": true,
            "type": "int",
            "schema": {
              "type": "int",
              "example": "1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          },
          "404": {
            "description": "Not found. The task does not exists.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Task not found"
                },
                "code": {
                  "type": "int",
                  "example": 404
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/create/": {
      "post": {
        "tags": [
          "Tasks"
        ],
        "summary": "Create a task",
        "description": "Create a task.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
         {
           "in": "body",
           "name": "body",
           "description": "New task definition.",
           "required": true,
           "schema": {
             "type": "object",
             "properties": {
               "task": {
                 "$ref": "#/definitions/task"
               }
             }
           }
         }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/update/": {
      "post": {
        "tags": [
          "Tasks"
        ],
        "summary": "Update a task",
        "description": "Update a task.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
         {
           "in": "body",
           "name": "body",
           "description": "New task definition.",
           "required": true,
           "schema": {
             "type": "object",
             "properties": {
               "task": {
                 "$ref": "#/definitions/task"
               },
               "id":{
                 "type": "int",
                 "example": 1
               }
             }
           }
         }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          },
          "404": {
            "description": "Not found. The task does not exists.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Task not found"
                },
                "code": {
                  "type": "int",
                  "example": 404
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/global/version/": {
      "get": {
        "tags": [
          "Global"
        ],
        "summary": "Get the Homeware's version.",
        "description": "Returns the Homeware's version.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the version.",
            "schema": {
              "type": "object",
              "properties": {
                "version": {
                  "type": "string",
                  "example": "v0.4"
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/global/get/": {
      "get": {
        "tags": [
          "Global"
        ],
        "summary": "Get all the devices, status and tasks info",
        "description": "Returns all the devices, status and tasks and theirs definitions.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns an object with all the data.",
            "schema": {
              "type": "object",
              "properties": {
                "devices": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/device"
                  }
                },
                "status": {
                  "type": "object",
                  "items": {
                    "$ref": "#/definitions/status"
                  }
                },
                "tasks": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/task"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/user/set/": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "DEPRECATED - Set the admin username and password.",
        "description": "DEPRECATED - Set the admin username and password.",
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "user",
            "description": "Username.",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myAdminUser"
            }
          },
          {
            "in": "body",
            "name": "pass",
            "description": "Password.",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myAdminPassword"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "string",
              "example": "Saved correctly!"
            }
          },
          "403": {
            "description": "Fail",
            "schema": {
              "type": "string",
              "example": "Your user has beed set in the past"
            }
          }
        }
      }
    },
    "/user/password/": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Update the admin password.",
        "description": "Update the admin password.",
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          },
          {
            "in": "body",
            "name": "Password",
            "description": "User current password.",
            "required": true,
            "schema": {
              "type": "string",
              "example": "mypassword"
            }
          },
          {
            "in": "body",
            "name": "New password",
            "description": "User new password.",
            "required": true,
            "schema": {
              "type": "string",
              "example": "mynewpassword"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "string",
              "example": "Updated"
            }
          },
          "401": {
            "description": "Fail",
            "schema": {
              "type": "string",
              "example": "Fail, the password hasn't been changed"
            }
          }
        }
      }
    },
    "/user/login/": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Validate the credentials and return a session token",
        "description": "Validate the credentials for the admin user and return an unique session token",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "user",
            "in": "header",
            "description": "The username.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "myAdminUser"
            }
          },
          {
            "name": "pass",
            "in": "header",
            "description": "The password.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "myAdminPassword"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the user data and token.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "in"
                },
                "user": {
                  "type": "string",
                  "example": "myAdminUser"
                },
                "token": {
                  "type": "string",
                  "example": "sessionToken"
                }
              }
            }
          },
          "401": {
            "description": "Fail.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "fail"
                }
              }
            }
          }
        }
      }
    },
    "/user/validateToken/": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Validate the session token",
        "description": "Validate the unique session token",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "user",
            "in": "header",
            "description": "The username.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "myAdminUser"
            }
          },
          {
            "name": "token",
            "in": "header",
            "description": "The session token that has been obtain during login.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "sessionToken"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the user data and token.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "in"
                }
              }
            }
          },
          "401": {
            "description": "Fail.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "fail"
                }
              }
            }
          }
        }
      }
    },
    "/settings/apiKey/": {
      "get": {
        "tags": [
          "Settings"
        ],
        "summary": "Generate a mew API Key",
        "description": "Generate a new API Key. This operation can only be done with a user Token not with an API Key.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: Admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {admin-session-token}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the new API key.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "in"
                }
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/settings/get/": {
      "get": {
        "tags": [
          "Settings"
        ],
        "summary": "Return the secure settings",
        "description": "Return the secure settings. This operation can only be done with a user Token not with an API Key.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: Admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {admin-session-token}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the new API key.",
            "schema": {
              "$ref": "#/definitions/settings"
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/settings/update/": {
      "post": {
        "tags": [
          "Settings"
        ],
        "summary": "Update the secure settings",
        "description": "This operation can only be done with a user Token not with an API Key.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: Admin Token.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "baerer {admin-session-token}"
            }
          },
          {
            "name": "body",
            "in": "body",
            "description": "New settings. All values must be set.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/settings"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the new API key.",
            "schema": {
              "$ref": "#/definitions/settings"
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/settings/domain/{domain}/": {
      "get": {
        "tags": [
          "Settings"
        ],
        "summary": "DEPRECATED - Set the DDNS domain up",
        "description": "DEPRECATED - Set the DDNS domain up.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "domain",
            "in": "path",
            "description": "The domain that must be set.",
            "required": true,
            "type": "string",
            "schema": {
              "type": "string",
              "example": "you.domain.com"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the requested device.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "403": {
            "description": "The assistant was configured in the past",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "The assistant was configured in the past."
                },
                "code": {
                  "type": "int",
                  "example": 403
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/settings/setAssistantDone/": {
      "get": {
        "tags": [
          "Settings"
        ],
        "summary": "Finish the initial configuration setup.",
        "description": "Finish the initial configuration setup that run during the installation process.",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful operation. Returns the requested device.",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "Success"
                },
                "code": {
                  "type": "int",
                  "example": 200
                }
              }
            }
          },
          "403": {
            "description": "The assistant was configured in the past",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "The assistant was configured in the past."
                },
                "code": {
                  "type": "int",
                  "example": 403
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/system/upgrade/": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Upgrade the Homeware installation.",
        "description": "Upgrade the Homeware installation with latest code available at the GitHub repository.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "int",
              "example": 200
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/system/restart/": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Restart Homeware.",
        "description": "Restart the Homeware services.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "int",
              "example": 200
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/system/reboot/": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Reboot the operating system.",
        "description": "Reboot the operating system.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "int",
              "example": 200
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/system/shutdown/": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Power off the system.",
        "description": "Power off the system.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation.",
            "schema": {
              "type": "int",
              "example": 200
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    },
    "/log/get/": {
      "get": {
        "tags": [
          "Log"
        ],
        "summary": "Get Homeware's logs",
        "description": "Get Homeware's logs",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authorization code: API Key or admin Token.",
            "required": true,
            "type": "string",
            "example": "baerer {yor-API-Key}",
            "schema": {
              "type": "string",
              "example": "baerer {yor-API-Key}"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation. Returns an array with all the devices.",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/log_register"
              }
            }
          },
          "401": {
            "description": "Insufficient Authentication Level. An API Key or admin Token is needed.",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Bad authentication"
                },
                "code": {
                  "type": "int",
                  "example": 401
                },
                "note": {
                  "type": "string",
                  "example": "See the documentation"
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "device": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "example": "switch000"
        },
        "type": {
          "type": "string",
          "example": "action.devices.types.SWITCH",
          "description": "See all abailable types on the Wiki: https://github.com/kikeelectronico/Homeware-LAN/wiki"
        },
        "name": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "example": "Switch"
            },
            "defaultNames": {
              "type": "array",
              "items": {
                "type": "string",
                "example": "Switch"
              }
            },
            "nicknames": {
              "type": "array",
              "items": {
                "type": "string",
                "example": "Switch"
              }
            }
          }
        },
        "deviceInfo": {
          "type": "object",
          "properties": {
            "hwVersion": {
              "type": "string",
              "example": "0.1"
            },
            "swVersion": {
              "type": "string",
              "example": "0.1"
            },
            "manufacturer": {
              "type": "string",
              "example": "Happy engineering"
            },
            "model": {
              "type": "string",
              "example": "The happy device"
            }
          }
        },
        "traits": {
          "type": "array",
          "items": {
            "type": "string",
            "example": "action.devices.traits.OnOff"
          },
          "description": "See all abailable types on the Wiki: https://github.com/kikeelectronico/Homeware-LAN/wiki"
        }
      }
    },
    "status": {
      "type": "object",
      "properties": {
        "online": {
          "type": "bool",
          "example": true
        }
      }
    },
    "task": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "example": "Turn on the light"
        },
        "description": {
          "type": "string",
          "example": "Turn on the light"
        },
        "triggers": {
          "type": "object",
          "example": {}
        },
        "target": {
          "type": "array",
          "example": []
        }
      }
    },
    "settings": {
      "type": "object",
      "properties": {
        "token": {
          "type": "object",
          "properties": {
            "google": {
              "type": "object",
              "properties": {
                "client_id": {
                  "type": "string",
                  "example": "123"
                },
                "client_secret": {
                  "type": "string",
                  "example": "456"
                }
              }
            }
          }
        },
        "ddns": {
          "type": "object",
          "properties": {
            "username": {
              "type": "string",
              "example": "username"
            },
            "password": {
              "type": "string",
              "example": "password"
            },
            "provider": {
              "type": "string",
              "example": "noip"
            },
            "hostname": {
              "type": "string",
              "example": "your.domain.com"
            },
            "enabled": {
              "type": "bool",
              "example": false
            }
          }
        },
        "mqtt": {
          "type": "object",
          "properties": {
            "user": {
              "type": "string",
              "example": "username"
            },
            "password": {
              "type": "string",
              "example": "password"
            }
          }
        }
      }
    },
    "log_register": {
      "type": "object",
      "properties": {
        "severity": {
          "type": "string",
          "example": "Alert"
        },
        "time": {
          "type": "string",
          "example": "31/10/2020, 20:53:04"
        },
        "message": {
          "type": "string",
          "example": "Catch an error on execution ofControl luz saln"
        }
      }
    }
  },
  "externalDocs": {
    "description": "Find out more about Homeware",
    "url": "https://github.com/kikeelectronico/Homeware-LAN"
  }
}
