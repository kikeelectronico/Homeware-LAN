<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<title data-react-helmet="true">Connecting hardware to Homeware | Homeware Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Connecting hardware to Homeware | Homeware Docs"><meta data-react-helmet="true" name="description" content="Homeware LAN uses MQTT for communicate with your hardware devices. You can use any example and library that you want in order to make it works."><meta data-react-helmet="true" property="og:description" content="Homeware LAN uses MQTT for communicate with your hardware devices. You can use any example and library that you want in order to make it works."><meta data-react-helmet="true" property="og:url" content="https://kikeelectronico.github.io/Homeware-LAN/docs/connecting-hardware"><link data-react-helmet="true" rel="shortcut icon" href="/Homeware-LAN/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kikeelectronico.github.io/Homeware-LAN/docs/connecting-hardware"><link rel="stylesheet" href="/Homeware-LAN/styles.972ed80a.css">
<link rel="preload" href="/Homeware-LAN/styles.16f51e96.js" as="script">
<link rel="preload" href="/Homeware-LAN/runtime~main.d1e135ac.js" as="script">
<link rel="preload" href="/Homeware-LAN/main.16fee78b.js" as="script">
<link rel="preload" href="/Homeware-LAN/1.4e0202f6.js" as="script">
<link rel="preload" href="/Homeware-LAN/33.4325a20b.js" as="script">
<link rel="preload" href="/Homeware-LAN/34.4e83c271.js" as="script">
<link rel="preload" href="/Homeware-LAN/935f2afb.9e59c185.js" as="script">
<link rel="preload" href="/Homeware-LAN/32.5bafa101.js" as="script">
<link rel="preload" href="/Homeware-LAN/0495e3a8.6aab349e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Homeware-LAN/"><img src="/Homeware-LAN/img/Homeware.png" alt="Homeware Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/Homeware-LAN/img/Homeware.png" alt="Homeware Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Homeware Docs</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/Homeware-LAN/docs/install">Docs</a><a class="navbar__item navbar__link" href="/Homeware-LAN/api/">API</a><a class="navbar__item navbar__link" href="/Homeware-LAN/libs/">Libs</a><a class="navbar__item navbar__link" href="/Homeware-LAN/docs/code-of-conduct/">Code of conduct</a><a class="navbar__item navbar__link" href="/Homeware-LAN/docs/contributing/">Contributing</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kikeelectronico/Homeware-LAN" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Homeware-LAN/"><img src="/Homeware-LAN/img/Homeware.png" alt="Homeware Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/Homeware-LAN/img/Homeware.png" alt="Homeware Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Homeware Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/Homeware-LAN/docs/install">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/Homeware-LAN/api/">API</a></li><li class="menu__list-item"><a class="menu__link" href="/Homeware-LAN/libs/">Libs</a></li><li class="menu__list-item"><a class="menu__link" href="/Homeware-LAN/docs/code-of-conduct/">Code of conduct</a></li><li class="menu__list-item"><a class="menu__link" href="/Homeware-LAN/docs/contributing/">Contributing</a></li><li class="menu__list-item"><a href="https://github.com/kikeelectronico/Homeware-LAN" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Homeware-LAN/docs/install">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Homeware-LAN/docs/connect-with-google">Connect with Google</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Homeware-LAN/docs/google-auth">Google auth for sync</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Homeware-LAN/docs/create-device">Create a device</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Homeware-LAN/docs/connecting-hardware">Connect a device</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Homeware-LAN/docs/reset-user">Change username or password</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Maintenance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Homeware-LAN/docs/renew-ssl-certificate">SSL certificate</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">4 Homeware devs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Homeware-LAN/docs/directories">Directories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Homeware-LAN/docs/datapy">Back - data.py</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Connecting hardware to Homeware</h1></header><div class="markdown"><p>Homeware LAN uses MQTT for communicate with your hardware devices. You can use any example and library that you want in order to make it works.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="connection-data"></a>Connection data<a class="hash-link" href="#connection-data" title="Direct link to heading">#</a></h1><p><strong>Host</strong>: It is the IP of your Raspberry Pi.</p><p><strong>Port</strong>: 1883</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="topics"></a>Topics<a class="hash-link" href="#topics" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="homeware-to-hardware---receive-data"></a>Homeware to hardware - receive data<a class="hash-link" href="#homeware-to-hardware---receive-data" title="Direct link to heading">#</a></h2><p>You can see all the device&#x27;s topics at <code>https://&lt;your.domain.com&gt;/devices/connecting/&lt;device-id&gt;/</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="main-topic"></a>Main Topic<a class="hash-link" href="#main-topic" title="Direct link to heading">#</a></h3><p>Each device has its own main topic that will be used by Homeware to send information to the device.</p><p>The <strong>main topic for each device</strong> is <code>device/&lt;device-id&gt;</code> where <code>&lt;device-id&gt;</code> is the unique id of each device.</p><p>The data that Homeware will sent depends on the device type and is a JSON formatted string.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h4><p>Imagine that we have a light in which both the On/Off status and the brightness can be controlled. Every time the status changes in Homeware, it will send something like:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;on&quot;:true,&quot;brightness&quot;:80}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="individual-topics"></a>Individual Topics<a class="hash-link" href="#individual-topics" title="Direct link to heading">#</a></h3><p>Each device has individual topics for each param or command.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="example-1"></a>Example<a class="hash-link" href="#example-1" title="Direct link to heading">#</a></h4><p>Imagine that we have a light in which the On/Off status can be controlled. Every time the <code>on</code> status changes in Homeware, it will send the new status to <code>device/&lt;device-id&gt;/on</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="hardware-to-homeware---send-data"></a>Hardware to Homeware - send data<a class="hash-link" href="#hardware-to-homeware---send-data" title="Direct link to heading">#</a></h2><p>The hardware can send data back to Homeware sending the data to the topic <code>device/control</code> and using the next format:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;id&quot;:&quot;&lt;device-id&gt;&quot;,&quot;param&quot;:&quot;&lt;param-to-change&gt;&quot;,&quot;value&quot;:&quot;&lt;new-value-for-param&gt;&quot;,&quot;intent&quot;:&quot;&lt;new-intent&gt;&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="example-2"></a>Example<a class="hash-link" href="#example-2" title="Direct link to heading">#</a></h3><p>Imagine that we have a smart bulb which <code>&lt;device-id&gt;</code> at Homeware is light001 and we want to change its brightness to 80%. We will send to <code>device/control</code> topic:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;id&quot;:&quot;light001&quot;,&quot;param&quot;:&quot;brightness&quot;,&quot;value&quot;:&quot;80&quot;,&quot;intent&quot;:&quot;&lt;new-intent&gt;&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The last parameter that must be configured is the intent, it can be set to:</p><p><code>execute</code> -&gt; Means that we only want to store the new value.</p><p><code>rules</code> -&gt; Means that we want to store the new value and verify all rules. It could be interesting if we know that one or more rules uses the parameter that we are changing as a trigger for do another job.</p><p><code>request</code> -&gt; Check <a href="#hardware-to-homeware---request-data">Hardware to Homeware - request data</a>.</p><p>The complete request can be something like:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;id&quot;:&quot;light001&quot;,&quot;param&quot;:&quot;brightness&quot;,&quot;value&quot;:80,&quot;intent&quot;:&quot;execute&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="hardware-to-homeware---request-data"></a>Hardware to Homeware - request data<a class="hash-link" href="#hardware-to-homeware---request-data" title="Direct link to heading">#</a></h2><p>The hardware can request its information to Homeware at any time by sending a request to <code>device/control</code> topic and using <code>request</code> as intent.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;id&quot;:&quot;light001&quot;,&quot;param&quot;:&quot;&quot;,&quot;value&quot;:&quot;&quot;,&quot;intent&quot;:&quot;request&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/kikeelectronico/Homeware-LAN/tree/master/docs/docs/connecting-hardware.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Homeware-LAN/docs/create-device"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Create a device</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Homeware-LAN/docs/reset-user"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Change username or password Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#homeware-to-hardware---receive-data" class="table-of-contents__link">Homeware to hardware - receive data</a><ul><li><a href="#main-topic" class="table-of-contents__link">Main Topic</a></li><li><a href="#individual-topics" class="table-of-contents__link">Individual Topics</a></li></ul></li><li><a href="#hardware-to-homeware---send-data" class="table-of-contents__link">Hardware to Homeware - send data</a><ul><li><a href="#example-2" class="table-of-contents__link">Example</a></li></ul></li><li><a href="#hardware-to-homeware---request-data" class="table-of-contents__link">Hardware to Homeware - request data</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Homeware Docs. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Homeware-LAN/styles.16f51e96.js"></script>
<script src="/Homeware-LAN/runtime~main.d1e135ac.js"></script>
<script src="/Homeware-LAN/main.16fee78b.js"></script>
<script src="/Homeware-LAN/1.4e0202f6.js"></script>
<script src="/Homeware-LAN/33.4325a20b.js"></script>
<script src="/Homeware-LAN/34.4e83c271.js"></script>
<script src="/Homeware-LAN/935f2afb.9e59c185.js"></script>
<script src="/Homeware-LAN/32.5bafa101.js"></script>
<script src="/Homeware-LAN/0495e3a8.6aab349e.js"></script>
</body>
</html>